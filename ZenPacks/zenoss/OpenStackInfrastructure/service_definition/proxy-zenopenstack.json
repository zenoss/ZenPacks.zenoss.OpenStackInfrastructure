{
    "servicePath": "/hub/collector",
    "serviceDefinition": {
        "Name": "proxy-zenopenstack",
        "Description": "zenopenstack proxy. Supplies SSL and allows more than one instance of zenopenstack to be started.",
        "Command": "/opt/zenoss/bin/proxy-zenopenstack",
        "Endpoints": [
                {
                    "Name": "proxy-zenopenstack_https",
                    "Application": "zenopenstack_{{(parent .).Name}}-proxy_https",
                    "PortNumber": 8342,
                    "Protocol": "tcp",
                    "Purpose": "export",
                    "AddressConfig": {
                        "Port": 8342,
                        "Protocol": "tcp"
                    }
                },
                {
                    "Name": "proxy-zenopenstack_http",
                    "Application": "zenopenstack_{{(parent .).Name}}-proxy_http",
                    "PortNumber": 8340,
                    "Protocol": "tcp",
                    "Purpose": "export",
                    "AddressConfig": {
                        "Port": 8340,
                        "Protocol": "tcp"
                    }
                },                
                {
                    "Name": "zenopenstack_http",
                    "Application": "zenopenstack_{{(parent .).Name}}_http",
                    "PortNumber": 8242,
                    "Protocol": "tcp",
                    "Purpose": "import_all"
                }
        ],
        "ImageID": "",
        "Instances": {
            "Min": 1,
            "Max": 1
        },
        "RAMCommitment": "1G",
        "CPUCommitment": 1,
        "Launch": "auto",
        "LogConfigs": [
            {
                "path": "/opt/zenoss/zproxy/logs/access.log",
                "type": "zproxy"
            },
            {
                "path": "/opt/zenoss/zproxy/logs/error.log",
                "type": "zproxy"
            }
        ],
        "ConfigFiles": {
            "/opt/zenoss/etc/proxy-zenopenstack.conf": {
                "####": "Contents will be loaded from ./-CONFIGS-/opt/zenoss/etc/proxy-zenopenstack.conf",
                "FileName": "/opt/zenoss/etc/proxy-zenopenstack.conf",
                "Owner": "zenoss:zenoss",
                "Permissions": "660"
                },
            "/opt/zenoss/bin/proxy-zenopenstack": {
                "####": "Contents will be loaded from ./-CONFIGS-/opt/zenoss/bin/proxy-zenopenstack",
                "FileName": "/opt/zenoss/bin/proxy-zenopenstack",
                "Owner": "root:root",
                "Permissions": "750"
                },
            "%(zenhome)s/etc/proxy-zenopenstack-env": {
                "FileName": "/opt/zenoss/etc/proxy-zenopenstack-env",
                "Owner": "zenoss:zenoss",
                "Content": "# Generated by serviced\nexport COLLECTOR_LOCATION=\"{{(parent .).Name}}\"\n",
                "Permissions": "660"
                }
        },
        "HealthChecks": {
                "running": {
                    "Script": "pgrep -fu root nginx > /dev/null",
                    "Interval": 5.0
                }
        },
        "Volumes": [
                {
                    "Owner": "zenoss:zenoss",
                    "ContainerPath": "/home/zenoss/.zenopenstack-certs",
                    "ResourcePath": ".proxy-zenopenstack-certs",
                    "Permission": "0755"
                },
                {
                    "Owner": "zenoss:zenoss",
                    "ResourcePath": "var-zenpacks",
                    "ContainerPath": "/var/zenoss",
                    "Permission": "0775"
                }
            ],
        "Tags": [
            "daemon",
            "collector"
        ]
    }
}
